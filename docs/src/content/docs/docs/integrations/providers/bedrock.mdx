---
title: Amazon Bedrock
description: SideSeat extracts model and token information from Amazon Bedrock API calls.
---

import { Tabs, TabItem, Aside } from '@astrojs/starlight/components';

SideSeat automatically extracts model information, token usage, and costs from Amazon Bedrock API calls.

## Prerequisites

- SideSeat running locally (`sideseat`)
- SDK installed (`pip install sideseat` / `uv add sideseat` or `npm install @sideseat/sdk`)
- AWS credentials configured for Amazon Bedrock

## Usage with Boto3

```python
from sideseat import SideSeat, Frameworks
import boto3

SideSeat(framework=Frameworks.Bedrock)

bedrock = boto3.client("bedrock-runtime", region_name="us-east-1")

response = bedrock.converse(
    modelId="us.anthropic.claude-sonnet-4-5-20250929-v1:0",
    messages=[{
        "role": "user",
        "content": [{"text": "Hello!"}]
    }]
)

print(response["output"]["message"]["content"][0]["text"])
```

## Usage with Strands

Strands has native Bedrock support:

```python
from sideseat import SideSeat, Frameworks
from strands import Agent

SideSeat(framework=Frameworks.Strands)

agent = Agent()
response = agent("Hello!")
print(response)
```

Strands uses Amazon Bedrock by default. To specify a model explicitly:

```python
from strands.models import BedrockModel

model = BedrockModel(model_id="us.anthropic.claude-sonnet-4-5-20250929-v1:0")
agent = Agent(model=model)
```

## Extracted Attributes

| Attribute | Source |
|-----------|--------|
| `gen_ai.system` | `bedrock` |
| `gen_ai.request.model` | Model ID from request |
| `gen_ai.response.model` | Model ID from response |
| `gen_ai.usage.input_tokens` | Usage metrics |
| `gen_ai.usage.output_tokens` | Usage metrics |
| `cloud.provider` | `aws` |
| `cloud.region` | AWS region |

## Cross-Region Inference

Bedrock cross-region inference profiles use a region prefix (e.g. `us.`, `eu.`):

```python
model = BedrockModel(
    model_id="us.anthropic.claude-sonnet-4-5-20250929-v1:0",
    region_name="us-east-1"
)
```

## Streaming

Streaming responses are captured:

```python
response = bedrock.converse_stream(
    modelId="us.anthropic.claude-sonnet-4-5-20250929-v1:0",
    messages=[{
        "role": "user",
        "content": [{"text": "Tell me a story"}]
    }]
)

for event in response["stream"]:
    if "contentBlockDelta" in event:
        print(event["contentBlockDelta"]["delta"]["text"], end="")
```

## User and Session Tracking

Associate spans with a user or session for filtering in the SideSeat UI:

```python
SideSeat(
    framework=Frameworks.Bedrock,
    user_id="user-123",
    session_id="session-abc",
)
```

All Bedrock spans will include `user.id` and `session.id` attributes.

To track a multi-turn conversation, wrap the calls in a `client.span()`:

```python
client = SideSeat(framework=Frameworks.Bedrock, user_id="user-123")
bedrock = boto3.client("bedrock-runtime", region_name="us-east-1")
model_id = "us.anthropic.claude-sonnet-4-5-20250929-v1:0"
messages = []

with client.span("chat-session", session_id="session-abc"):
    # First turn
    messages.append({"role": "user", "content": [{"text": "What is the capital of France?"}]})
    response = bedrock.converse(modelId=model_id, messages=messages)
    assistant_msg = response["output"]["message"]
    messages.append(assistant_msg)

    # Second turn — same session
    messages.append({"role": "user", "content": [{"text": "What about Germany?"}]})
    response = bedrock.converse(modelId=model_id, messages=messages)
    assistant_msg = response["output"]["message"]
    messages.append(assistant_msg)

    print(assistant_msg["content"][0]["text"])
```

Both converse calls and all child spans inherit `user.id` and `session.id`, grouping them into a single session in the SideSeat UI.

Values can also be set via environment variables (`SIDESEAT_USER_ID`, `SIDESEAT_SESSION_ID`).

## Authentication

Amazon Bedrock uses the standard AWS credential chain:

```bash
# Environment variables
export AWS_ACCESS_KEY_ID=xxx
export AWS_SECRET_ACCESS_KEY=xxx
export AWS_REGION=us-east-1

# Or AWS profile
export AWS_PROFILE=my-profile
```

## Next Steps

- [Strands](/docs/integrations/frameworks/strands/) — full Strands guide
- [Python SDK](/docs/sdks/python/) — SDK reference
